{% extends 'base.html.twig' %}

{% block title %}{{postShow.title}}{% endblock %}

{% block body %}
<div class="container-fluid">
    <div class="container">
        <div class="row">
            <div class="col-md-12 mt-5">
                <a class="showLink" href="{{path('app_main')}}"><i class="fa-solid fa-arrow-left"></i> Retour à l'accueil</a>
            </div>
             <div class="col-md-12 mt-5">
                <h1 class="showTitle">{{postShow.title}}</h1>
            </div>
            <div class="col-md-12 pb-3">
                <h2 class="showSubtitle">{{postShow.subtitle}}</h2>
            </div>
            <div class="col-md-12 pb-5">
                <div id="carouselExample" class="carousel slide">
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img src="{{asset('/divers/images/' ~ postShow.image1)}}" class="d-block w-100" alt="image voyage">
                        </div>
                        <div class="carousel-item">
                            <img src="{{asset('/divers/images/' ~ postShow.image2)}}" class="d-block w-100" alt="image voyage">
                        </div>
                        <div class="carousel-item">
                            <img src="{{asset('/divers/images/' ~ postShow.image3)}}" class="d-block w-100" alt="image voyage">
                        </div>
                        <div class="carousel-item">
                            <img src="{{asset('/divers/images/' ~ postShow.image4)}}" class="d-block w-100" alt="image voyage">
                        </div>
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>
            </div>
            <div class="col-md-12">
                <div class="row">
                    <div class="col-md-7">
                        <div class="col-md-12">
                            <p class="showText pb-4">{{postShow.description}}</p>
                        </div>
                        <div class="col-md-12 pb-2">
                            <h4 class="showSubtitle">Détails du voyage</h4>
                        </div>
                        <div class="col-md-12">
                            <p class="showText">Le prix comprend :</p>
                        </div>
                        <div class="col-md-12 line pb-3 mb-4">
                            <p class="showText">{{postShow.details}}</p>
                        </div>
                        <div class="col-md-12 pb-3">
                            <h4 class="showSubtitle">Votre avis nous intéresse</h4>
                        </div>
                        <div class="col-md-12">
                            {% if postShow.comments|length < 1 %}
                                <p >Il n'y a pas encore d'avis pour ce voyage.</p>
                            {% else %}
                                {% for comment in comments %}
                                    <div class="row  d-flex align-items-center">
                                    
                                        <div class="col-md-1"><img src="{{asset('divers/avatars/' ~ comment.user.avatar)}}" class="roundedAvatar" alt="avatar de l'utilisateur"></div>
                                        <div class="col-md-11 line pb-2 pt-2">{{comment.content}} <br>Le {{comment.createdAt|date('d/m/Y  H : i')}}</div>
                                    </div>
                                {% endfor %}
                            {% endif %}
                        </div>
                        <div class="col-md-12 mt-4">
                            {% if app.user %}
                                {{ form_start(comment_form) }}
                                    <div class="col-md-12 pb-3">{{form_widget(comment_form.content)}} {{ form_errors(comment_form.content) }}</div>
                                    <div class="col-md-12 mb-5">{{form_widget(comment_form.save)}}</div>
                                {{ form_end(comment_form) }}
                            {% else %}
                                <div class="col-md-12 mb-3"><p class="showText"><a href="{{path('app_login', {'referer': app.request.uri})}}" class="loginLink">Connectez-vous</a> à votre compte pour donner votre avis</p></div>
                            {% endif %}
                        </div>
                    </div>
                    <div class="col-md-5">
                       <div class="col-md-12 ps-5">
                            <div class="row ps-3">
                                <div class="form-check col-md-4 d-flex align-items-center">
                                    <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1">
                                    <label class="form-check-label ps-2" for="flexRadioDefault1">
                                        {{postShow.date1 | date('d/m/Y')}}
                                    </label>
                                </div>
                                <div class="form-check col-md-4 d-flex align-items-center">
                                    <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault2">
                                    <label class="form-check-label ps-2" for="flexRadioDefault2">
                                        {{postShow.date2 | date('d/m/Y')}}
                                    </label>
                                </div>
                                <div class="form-check col-md-4 d-flex align-items-center">
                                    <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault3">
                                    <label class="form-check-label ps-2" for="flexRadioDefault2">
                                        {{postShow.date3 | date('d/m/Y')}}
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-12 mt-5">
                                <div class="row mb-2 d-flex align-items-center">
                                    <div class="col-md-5 d-flex justify-content-end"><input class="form-control" id="priceInput" style="width: 90px; text-align: center; font-size: 1.2em;" type="text" value=""></div>
                                    <div class="col-md-7"><p class="pt-3" style="font-size: 1.7em; color: #1C1C68;">€ pour 10 nuits</p></div>
                                </div>
                            </div>
                            <div class="col-md-12  d-flex justify-content-center"><a href="link" class="btn btn-lg submitBtn mb-5">Je réserve</a></div>
                            <div class="col-md-12">
                                <div class="row m-5">
                                    <div class="col-md-1"></div>
                                    <div class="col-md-10" style="text-align:center;">
                                        <div class="col-md-12">Vous avez des questions ?</div>
                                        <div class="col-md-12 pb-3">Besoin d'un devis personnalisé ?</div>
                                        <div class="col-md-12"><a href="{{path('app_main')}}#contact" class="btn btn-lg submitBtn">Contactez-nous</a></div>
                                    </div>
                                    <div class="col-md-1"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

    <script>
        // Définitions des prix
        const prices = {
            price1: "{{postShow.price1}}",
            price2: "{{postShow.price2}}",
            price3: "{{postShow.price3}}"
        };

        // Récupérer les id des inputs pour récupérer les éléments
        const priceInput = document.getElementById('priceInput');
        const radio1 = document.getElementById('flexRadioDefault1');
        const radio2 = document.getElementById('flexRadioDefault2');
        const radio3 = document.getElementById('flexRadioDefault3');

        // Ajouter des gestionnaires d'événements pour chaque radio
        radio1.addEventListener('change', function() {
            if (radio1.checked) {
                priceInput.value = prices.price1;
            }
        });

        radio2.addEventListener('change', function() {
            if (radio2.checked) {
                priceInput.value = prices.price2;
            }
        });

        radio3.addEventListener('change', function() {
            if (radio3.checked) {
                priceInput.value = prices.price3;
            }
        });
    </script>
{% endblock %}